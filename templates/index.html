<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft 服务器扫描结果</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/flag-icon-css@4.1.7/css/flag-icons.min.css" rel="stylesheet">
    <style>
        .server-card {
            transition: transform 0.2s;
        }
        .server-card:hover {
            transform: translateY(-5px);
        }
        .country-section {
            margin-bottom: 2rem;
        }
        .stats-card {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
        }
        .server-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }
        .status-online {
            background-color: #28a745;
        }
        .status-full {
            background-color: #dc3545;
        }
    </style>
</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="https://www.minecraft.net/etc.clientlibs/minecraft/clientlibs/main/resources/img/menu/menu-buy.gif" 
                     alt="Minecraft" height="30">
                服务器扫描器
            </a>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- 统计信息 -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body">
                        <h5 class="card-title">总服务器数</h5>
                        <h2>{{ stats.total_servers }}</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body">
                        <h5 class="card-title">覆盖国家/地区</h5>
                        <h2>{{ stats.total_countries }}</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body">
                        <h5 class="card-title">在线玩家</h5>
                        <h2>{{ stats.total_players }}</h2>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body">
                        <h5 class="card-title">最大玩家容量</h5>
                        <h2>{{ stats.max_players }}</h2>
                    </div>
                </div>
            </div>
        </div>

        <!-- 按国家分组的服务器列表 -->
        {% for country_code, servers in servers_by_country.items() %}
        <div class="country-section">
            <h3 class="mb-3">
                <span class="flag-icon flag-icon-{{ country_code.lower() }}"></span>
                {{ servers[0].country.name_zh }}
                <small class="text-muted">({{ servers|length }} 个服务器)</small>
            </h3>
            <div class="row">
                {% for server in servers %}
                <div class="col-md-4 mb-3">
                    <div class="card server-card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <span class="server-status {% if server.players_online >= server.players_max %}status-full{% else %}status-online{% endif %}"></span>
                                {{ server.host }}:{{ server.port }}
                            </h5>
                            <p class="card-text">
                                <strong>版本：</strong>{{ server.version }}<br>
                                <strong>玩家：</strong>{{ server.players_online }}/{{ server.players_max }}<br>
                                <strong>延迟：</strong>{{ "%.2f"|format(server.latency) }}ms<br>
                                <strong>描述：</strong>{{ server.description }}
                            </p>
                        </div>
                        <div class="card-footer text-muted">
                            更新时间：{{ server.timestamp.split('T')[0] }}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 